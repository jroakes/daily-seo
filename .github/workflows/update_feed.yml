name: Update Feed

on:
 schedule:
  - cron: '0 */4 * * *' # Run every 4 hours
 push:
  branches:
   - main

jobs:
 build:
  runs-on: ubuntu-latest

  steps:
   - name: Checkout repository
    uses: actions/checkout@v4 

   - name: Set up Python
    uses: actions/setup-python@v4 
    with:
     python-version: '3.9'

   - name: Install dependencies
    run: |
     python -m pip install --upgrade pip
     pip install pandas google-generativeai python-dotenv

   - name: Run script
    env:
     GOOGLE_API_KEY: ${{ secrets.GOOGLE_API_KEY }}
    run: python script.py

   - name: Commit changes
    run: |
     git config --global user.name 'github-actions[bot]'
     git config --global user.email 'github-actions[bot]@users.noreply.github.com'
     git add .
     git commit -m 'Update feed'
     git push
